<template>
  <div class="page" data-name="catalog" id="catalog">
    <div class="navbar">
      <div class="navbar-inner sliding">
        <div class="left">
          <a href="#" class="link back">
              <i class="material-icons">
                  arrow_back_ios
                  </i>
            <span class="ios-only">Back</span>
          </a>
        </div>
        <div class="title">Catalog</div>
      </div>
    </div>
    <div class="page-content">
      <div class="list list-block media-list">
        <ul>
          {{#each products}}
         
          <li class="swipeout">
            <div class="swipeout-content" data-id="{{id}}">
              <a href="/product/{{id}}/" class="item-link item-content">
                <div class="item-media"><img src="{{img}}" width="80"></div>
                <div class="item-inner">
                  <div class="item-title-row">
                    <div class="item-title">{{name}}</div>
                    <div class="item-after"><del>₱{{oldprice}}</del>&nbsp; <span>₱{{price}}</span></div>
                  </div>
                  <!--<truediv class="item-subtitle"><a href=""><span class="mybadge badge {{statecolor}} mr-1">{{state}}</span></a></div>-->
                  <div class="item-text">{{descr}}</div>
                  <p><small>{{cat}}</small></p>
                </div>
              </a>
              <div id="stepper_prod_{{id}}" data-id="{{id}}" class="myStepper_{{id}} swipeout-actions-right">
              <div class="stepper stepper-small stepper-init">
                  <div class="stepper-button-minus prod_{{id}}" onclick="app.updateItem({{id}} ,{{stock}})"  ></div>
                  <div class="stepper-input-wrap">
                    <input type="number" id="prod_{{id}}" readonly name="quant[{{id}}]" class="form-control input-number quantity manage-qtty" value="0" min="0" max="100">
                  </div>
                 <!-- <div class="stepper-button-plus prod_{{id}}" onclick="app.addToCart('{{id}}')"></div>-->
                 <div class="stepper-button-plus prod_{{id}}" data-id="plus_{{id}}" onclick="app.addToMyCart({{id}})"></div>
                </div>
              </div>
            
               
          </li>
          {{/each}}
        </ul>
      </div>
    </div>
  </div>
</template>
<script>
 productlist = JSON.parse(localStorage.getItem("products"));
 console.log(productlist);
 Categorize(selectedCat)
 //mycat= $$("#MyCategory").val();
  return {
    data: function (e) {
    // selectedCategory = $$(this).val();
      return {
       // products: this.$root.products,
       products:_.filter(productlist, function(item, index) {
       //  console.log('----')
        return _.contains([selectedCat], item.cat);
        })
      };
    }
  }
  
</script>